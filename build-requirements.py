#!/usr/bin/python3
import os
import sys
import asyncio

def find_requirements_files(root_dir):
    requirements_files = []
    for root, dirs, files in os.walk(root_dir):
        if 'requirements.txt' in files:
            requirements_files.append(os.path.join(root, 'requirements.txt'))
    return requirements_files

async def run():
    submodule_requirements = find_requirements_files('lib')
    with open('requirements.txt', 'a') as main_req_file:
        main_req_file.truncate(0)
        for submodule_req in submodule_requirements:
            main_req_file.write(f"-r {submodule_req}\n")

    print("Submodule requirements added to main requirements.txt")


if __name__ == "__main__":
    asyncio.run(run())